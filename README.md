# ExploreWithMe (EWM) Platform

ExploreWithMe – это платформа для поиска и организации мероприятий, управления заявками, рейтингов и аналитики, разработанная с использованием микросервисной архитектуры. Этот проект представляет собой модернизированную версию существующего монолитного приложения, которая подготовлена к высоким нагрузкам и масштабируемости.

---

## Архитектура

### Компоненты системы

1. **Discovery Server (Eureka)**:
    - Реализует сервис-ориентированное обнаружение.
    - Позволяет микросервисам регистрироваться и находить друг друга.

2. **Config Server**:
    - Централизованное хранилище конфигураций.
    - Упрощает управление настройками всех микросервисов.

3. **Gateway Server**:
    - API Gateway для маршрутизации запросов.
    - Инкапсулирует внутреннюю архитектуру, предоставляя единый входной API.

4. **Stats Service**:
    - Собирает и анализирует статистику по запросам пользователей.

5. **Event Service**:
    - Управляет событиями, категориями,подборками и локацией!

6. **Request Service**:
   - Управляет заявками на участие в мероприятиях.

7. **User Service**:
   - Сервис для администратора - управления пользователями.

8. **Comment Service**:
   - Управляет комментариями пользователей.

### Рекомендательная система:
1. **Collector**:
    - Принимает сообщения о действиях пользователей, используя gRPC. Записывает полученные данные в Kafka-топик stats.user-actions.v1 для дальнейшей обработки
      
2. **Aggregator**:
    - Читает данные из топика stats.user-actions.v1 и выполняет следующие вычисления:
      a. рассчитывает сходство мероприятий и записывает результаты в топик stats.events-similarity.v1.
      
3. **Analyzer**:
    - Читает данные из топиков:  
      a. stats.user-actions.v1 — для хранения информации о последней оценке (максимальном весе действия) пользователей мероприятий;  
      b. stats.events-similarity.v1 — для хранения информации о сходстве мероприятий. Обновляет базу данных на основе поступающих данных.  
      Обрабатывает запросы от других сервисов по gRPC и предоставляет:  
      a. список рекомендуемых мероприятий для конкретного пользователя на основе сходства мероприятий;  
      b. список мероприятий, которые похожи на указанное и с которыми пользователь ещё не взаимодействовал.
---

## Взаимодействие между сервисами

Микросервисы взаимодействуют друг с другом через:
- **OpenFeign** – для межсервисной коммуникации.
- **Eureka** – для динамического поиска сервисов.
- **API Gateway** – для маршрутизации внешних запросов к соответствующим сервисам.

Каждый микросервис обладает собственной базой данных на основе PostgreSQL и взаимодействует с другими сервисами через REST API.

---

## Внутренний API для взаимодействия сервисов

### Основные эндпоинты

- **Event Service**:
    - Публичные маршруты для событий: `/events/**`
    - Административные маршруты для управления событиями: `/admin/events/**`
    - Административные маршруты для управления категориями: `/admin/categories/**`
    - Административные маршруты для управления подборками: `/admin/compilations/**`

- **Request Service**:
    - Управление заявками: `/users/{userId}/requests/**`
    - Управление заявками для событий: `/users/{userId}/events/{eventId}/requests/**`

- **User Service**:
    - Управление пользователями: `/admin/users/**`

- **Comment Service**:
    - Административные маршруты для управления комментариями: `/admin/comments/**`
   - Публичные маршруты для событий:  `/comments/**` 
---

## Конфигурация

Все конфигурации для микросервисов хранятся централизованно в **Config Server**. Взаимодействие настроено через Spring Cloud Config, который обеспечивает динамическое получение конфигурации.

---
## Технологии:

- Java 21
- Spring Boot 3.3.2
- PostgreSQL
- Spring Data JPA
- Hibernate ORM
- Apache Kafka
- Apache Avro
- Protocol Buffers
- gRPC
- Spring Cloud Config
- Spring Cloud Eureka
- Spring Cloud Feign
- Spring Cloud Gateway
- Spring Cloud Load Balancer

---
